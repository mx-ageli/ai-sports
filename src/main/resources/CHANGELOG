### 接口文档说明
===

作者:孟加鑫
电话(微信): 18608121393

-------------
#### 下面的内容是项目接口文档, 支持在线调试调用!


##### 我们这个项目的所有功能几乎都是需要登录后才能使用，所以调用每个接口时都需要传递令牌。下面有令牌的获取方式，以及使用方式。
##### 其中访问的url中带有/v/路径的接口不需要使用令牌就可以请求，目前只有两个接口**/api/user/v/login**、**/api/user/v/get_code**不用验证。
> 怎么获取令牌？
> 第一步，先调用**/api/user/v/get_code**接口，输入手机号获得短信验证码。我们在测试阶段不发送短信，直接使用666666作为默认验证码。
> 第二步，再通过手机号和获得的验证码，调用**/api/user/v/login**接口，这时候会返回一个令牌。
> 令牌格式: eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIyIiwiZXhwIjoxNTY0NzM2MDkyLCJpYXQiOjE1NjQxMzEyOTJ9.UOZka6D2Gyuf4jK4WKzlCOGIdCuyUEGqJ5U1yF8jTCQO_mX8sM5NSdjag0AdRK7hhlGYGd2qJP9bzkc3uXU0YA
>
> 怎么使用令牌？
> 在每一个接口的请求的Header中添加参数Authorization，值为具体的令牌即可。
>
> 关于令牌过期的问题？
> 我们的令牌过期时间默认为30天，在这30天内用户可以不用登录，一直使用这个令牌。但是会涉及到30天后过期的问题，所以我们在每次启动app的时候，
> 调用**/api/user/v/refresh**接口来获得一个新的有效期30天的令牌

#### 字典代码
- 用户角色：1 学生，2 老师
- 学期类型：1 上学期，2 下学期

#### 规则配置
- 登录短信验证码的过期时间为：5分钟
- 登录短信验证码重复获取的间隔时间为： 1分钟
- 所有的时间默认格式：yyyy-MM-dd HH:mm:ss，需要其他格式根据自己业务需求格式化
- 星期： 分别用 1周日 2周一 3周二 4周三 5周四 6周五 7周六
- 小时格式时间： HH:mm 只需要小时和分钟

---
#### 日常更新日志

* 2020-08-03
项目基础代码初始化，实现基础功能
swagger文档的支持

* 2020-08-04
实现用户相关接口，获取验证码、登录、刷新token
实现oss服务器配置，满足文件上传服务
实现接口限流功能，防止高并发请求
实现Xss攻击拦截器，防止xss攻击
实现短信服务
实现接口级别日志记录，登录日志记录，方便问题跟踪
创建基本表结构，以及项目中的domain

* 2020-08-05
实现班级创建、修改、查询
实现注册登记默认老师

* 2020-08-06
实现学期的查询
实现修改个人信息接口
登录接口和修改个人信息支持事物操作
替换阿里云oss的配置为ai-sports的

* 2020-08-11
实现部分监控接口
设计课程、跑步的数据结构
课程和跑步初步的接口定义

* 2020-08-13
课程和跑步初步的接口定义

* 2020-08-15
四张表的模型定义：课程的报名学生表、学生每次课程的记录表、打卡表、课程记录表

* 2020-08-17
添加定时任务调动组件，用来做课程活动开始前的数据准备
接口调用添加了角色校验

* 2020-08-19
实现老师添加课程、修改课程接口
实现课程添加成功后将创建课程记录任务，以及报名学生同步任务